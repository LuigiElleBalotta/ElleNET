"use strict";var Lightbox={timeout:0,initialized:false,contents:[],currentIndex:0,contentType:"image",DEFAULT_WIDTH:480,DEFAULT_HEIGHT:360,anchorClose:true,config:{showTitle:false,includeControls:false},init:function(){Blackout.initialize();Lightbox.build();Lightbox.initialized=true;},storeContentData:function(a,b){if(!Lightbox.initialized){Lightbox.init();}Lightbox.contents=a;Lightbox.contentType=b;Lightbox.currentIndex=0;Lightbox.controls.toggleClass("no-paging",(a.length<2));},loadImage:function(a,d,b){if(!Lightbox.initialized){Lightbox.init();}if(!d){Lightbox.storeContentData(a,"image");}var c=b||((typeof a==="number")?a:0);if(Lightbox.contents[c].src!==""){Lightbox.currentIndex=c;Lightbox.setFrameDimensions(Lightbox.DEFAULT_WIDTH,Lightbox.DEFAULT_HEIGHT);Lightbox.content.removeAttr("style").addClass("loading").removeClass("lightbox-error").html("");Lightbox.show();Lightbox.setImage(Lightbox.contents[c]);}else{Lightbox.error();}},setImage:function(a){if(Core.isIE(6)){if(Lightbox.controls.hasClass("no-paging")&&Lightbox.controls.hasClass("no-gallery")){Lightbox.controls.addClass("no-controls").removeClass("no-paging no-gallery");}}Lightbox.preloadImage(a,function(b){Lightbox.emptyContent();Lightbox.setFrameDimensions(b.width,b.height);Lightbox.content.html(b);if(Lightbox.config.showTitle){Lightbox.title.html(a.title||"");}});},loadVideo:function(c,d,a){if(!Lightbox.initialized){Lightbox.init();}if(!d){Lightbox.storeContentData(c,"video");}var b=a||((typeof c==="number")?c:0);Lightbox.setVideo(c[b]);},setVideo:function(b){var c={flvPath:(b.flvBase||Flash.videoBase)+b.flvPath,flvWidth:b.width,flvHeight:b.height,ratingPath:b.customRating,captionsPath:"",captionsDefaultOn:(Core.locale!=="en-us"&&Core.locale!=="en-gb")};if(!b.showRating||false){c=$.extend(Flash.defaultVideoFlashVars,c);}var a=new Date();a="?nocache="+a.getTime();if(typeof b.captionsPath!=="undefined"&&b.captionsPath!==""){c.captionsPath=b.captionsPath;}else{delete c.captionsPath;}if(typeof b.customRating!=="undefined"&&b.customRating!==""){if(b.customRating.indexOf("NONE")>-1){delete c.ratingPath;}else{c.ratingPath=b.customRating;}}else{c.ratingPath=Flash.ratingImage;}Lightbox.emptyContent();$("<div id='flash-target' />").appendTo(Lightbox.content);swfobject.embedSWF(Flash.videoPlayer+a,"flash-target",b.width,b.height,Flash.requiredVersion,Flash.expressInstall,c,Flash.defaultVideoParams,{},Lightbox.flashEmbedCallback);if(Lightbox.config.showTitle){Lightbox.title.html(b.title||"");}Lightbox.setFrameDimensions(b.width,b.height);Lightbox.show();},loadEmbed:function(d,c,a){if(!Lightbox.initialized){Lightbox.init();}if(!c){Lightbox.storeContentData(d,"embed");}var b=a||((typeof d==="number")?d:0);Lightbox.setEmbed(d[b]);},setEmbed:function(a){Lightbox.emptyContent();$("<object width='"+a.width+"' height='"+a.height+"'><param name='movie' value='https://www.youtube.com/v/"+a.src+"?autoplay=1'/><param name='allowFullScreen' value='true' /><param name='allowScriptAccess' value='always'/><param name='wmode' value='opaque' /><embed src='https://www.youtube.com/v/"+a.src+"?autoplay=1' type='application/x-shockwave-flash' allowfullscreen='true' allowScriptAccess='always' wmode='opaque' width='"+a.width+"' height='"+a.height+"'/></object>").appendTo(Lightbox.content);if(Lightbox.config.showTitle){Lightbox.title.html(a.title||"");}Lightbox.setFrameDimensions(a.width,a.height);Lightbox.show();},viewInGallery:function(){Tooltip.hide();Core.goTo(Lightbox.contents[Lightbox.currentIndex].path);return false;},setFrameDimensions:function(b,a){if(b===0||a===0){Lightbox.error();}else{Lightbox.content.css({height:a+"px"});a=(Lightbox.config.showTitle)?a+Lightbox.title.height():a;a=(Lightbox.config.includeControls)?a+Lightbox.controls.height():a;Lightbox.container.css({top:Page.scroll.top+"px",width:b+"px",height:a+"px"});Lightbox.borderTop.width(b-10+"px");Lightbox.borderbottom.width(b-12+"px");Lightbox.borderRight.height(a-9+"px");Lightbox.borderLeft.height(a-9+"px");}},checkGalleryLinkDisplay:function(a){Lightbox.controls.toggleClass("no-gallery",a);},preloadImage:function(b,c){var a=new Image();$(a).load(function(){c(a);});a.src=b.src;},show:function(){Blackout.show(function(){Lightbox.container[0].style.display="block";Lightbox.checkGalleryLinkDisplay(!(Lightbox.contents[Lightbox.currentIndex].path));},Lightbox.close);},close:function(){clearTimeout(Lightbox.timeout);Blackout.hide(Lightbox.container.hide());if(Lightbox.contentType==="video"){swfobject.removeSWF("flash-target");}if(Lightbox.contentType==="embed"){Lightbox.emptyContent();}Tooltip.hide();},emptyContent:function(){Lightbox.content.removeAttr("style").removeClass("loading lightbox-error").empty();},error:function(){Lightbox.emptyContent();Lightbox.setFrameDimensions(Lightbox.DEFAULT_WIDTH,Lightbox.DEFAULT_HEIGHT);Lightbox.content.addClass("lightbox-error").html("Error loading content.");Lightbox.show();},build:function(){Lightbox.anchor=$('<div id="lightbox-anchor" />').click(function(){if(Lightbox.anchorClose){Lightbox.close();}});Lightbox.container=$('<div id="lightbox-container" />').mouseover(function(){Lightbox.anchorClose=false;}).mouseout(function(){Lightbox.anchorClose=true;}).appendTo(Lightbox.anchor);Lightbox.title=$('<h1 id="lightbox-title" />').mouseover(function(){Lightbox.anchorClose=false;}).mouseout(function(){Lightbox.anchorClose=true;}).appendTo(Lightbox.container);Lightbox.content=$('<div id="lightbox-content"/>').mouseover(function(){Lightbox.anchorClose=false;}).mouseout(function(){Lightbox.anchorClose=true;}).appendTo(Lightbox.container).click(Lightbox.next);var b=$("<a />").addClass("ui-element").attr("href","javascript:;");Lightbox.controls=$('<div class="control-wrapper no-paging no-gallery" />');Lightbox.controls.append($('<div class="lightbox-controls ui-element" />').append(b.clone().addClass("previous").click(Lightbox.previous)).append(b.clone().addClass("next").click(Lightbox.next)).append(b.clone().addClass("gallery-view").click(Lightbox.viewInGallery).mouseover(function(){Tooltip.instances.common.show(this,Msg.ui.viewInGallery);Tooltip.instances.common.wrapper.css("z-index","9007");}).mouseout(function(){Tooltip.instances.common.wrapper.css("z-index","1000");})));var a=$("<div />").addClass("border");Lightbox.borderTop=a.clone().attr("id","lb-border-top");Lightbox.borderRight=a.clone().attr("id","lb-border-right");Lightbox.borderbottom=a.clone().attr("id","lb-border-bottom");Lightbox.borderLeft=a.clone().attr("id","lb-border-left");var c=$("<div />").addClass("corner");Lightbox.container.append(c.clone().addClass("corner-top-left")).append(c.clone().addClass("corner-top-right")).append(c.clone().addClass("corner-bottom-left")).append(c.clone().addClass("corner-bottom-right")).append(Lightbox.borderTop).append(Lightbox.borderRight).append(Lightbox.borderbottom).append(Lightbox.borderLeft).append(Lightbox.controls).append(b.clone().addClass("lightbox-close").click(Lightbox.close));Lightbox.anchor.appendTo("body");if(Core.isIE(6)){Lightbox.content.show().hide();}},next:function(){var a=Lightbox.contents.length;if(a>1){Lightbox.currentIndex++;if(Lightbox.currentIndex>=a){Lightbox.currentIndex=0;}if(Lightbox.contentType==="image"){Lightbox.setImage(Lightbox.contents[Lightbox.currentIndex]);}else{if(Lightbox.contentType==="video"){Lightbox.setVideo(Lightbox.contents[Lightbox.currentIndex]);}else{if(Lightbox.contentType==="embed"){Lightbox.setEmbed(Lightbox.contents[Lightbox.currentIndex]);}}}}},previous:function(){var a=Lightbox.contents.length;if(a>1){Lightbox.currentIndex--;if(Lightbox.currentIndex<0){Lightbox.currentIndex=Lightbox.contents.length-1;}if(Lightbox.contentType==="image"){Lightbox.setImage(Lightbox.contents[Lightbox.currentIndex]);}else{if(Lightbox.contentType==="video"){Lightbox.setVideo(Lightbox.contents[Lightbox.currentIndex]);}else{if(Lightbox.contentType==="embed"){Lightbox.setEmbed(Lightbox.contents[Lightbox.currentIndex]);}}}}},flashEmbedCallback:function(a){if(!a.success){Lightbox.content.html(Flash.getFlashError());}}};