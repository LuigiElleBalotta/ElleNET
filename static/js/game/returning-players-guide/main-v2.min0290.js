$(function(){fixWithinContainer.init(".section-with-sidebar-menu",".sidebar-menu");sectionWithSidebarMenu.init()});var fixWithinContainer={containerQuery:null,elementQuery:null,modifierClassName:"is-fixed",REFRESH_RATE:50,init:function(containerQuery,elementQuery){fixWithinContainer.containerQuery=typeof containerQuery!=="undefined"?containerQuery:".is-fixed-container";fixWithinContainer.elementQuery=typeof elementQuery!=="undefined"?elementQuery:".is-fixable-element";var windowChanged=false;fixWithinContainer.refresh();$(window).scroll(function(){windowChanged=true});$(window).resize(function(){windowChanged=true});setInterval(function(){if(windowChanged){windowChanged=false;fixWithinContainer.refresh()}},fixWithinContainer.REFRESH_RATE)},refresh:function(){var distanceScrolledFromTop=$(window).scrollTop();$(fixWithinContainer.containerQuery).each(function(){var containerHeight=$(this).height();var containerOffset=$(this).offset();var containerOffsetFromTop=containerOffset.top;var containerOffsetFromLeft=containerOffset.left;var containerOffsetFromBottom=containerOffsetFromTop+containerHeight;$(this).find(fixWithinContainer.elementQuery).each(function(){var elementHeight=$(this).height();if(distanceScrolledFromTop>=containerOffsetFromTop){if(distanceScrolledFromTop>=containerOffsetFromBottom-elementHeight){$(this).removeClass(fixWithinContainer.modifierClassName).css({top:containerHeight-elementHeight,left:""})}else{$(this).addClass(fixWithinContainer.modifierClassName).css({top:"",left:containerOffsetFromLeft})}}else{$(this).removeClass(fixWithinContainer.modifierClassName).css({top:"",left:""})}})})}};var sectionWithSidebarMenu={$elements:null,$elementsBody:null,currentPageName:null,currentPageDisplayName:null,cachedPages:{},SCROLL_DELAY_TIME:300,init:function(){sectionWithSidebarMenu.$elements=$(".section-with-sidebar-menu");sectionWithSidebarMenu.$elementsBody=sectionWithSidebarMenu.$elements.find(".section-with-sidebar-menu-body");if(sectionWithSidebarMenu.isHistorySupported()){sectionWithSidebarMenu.$elements.find(".sidebar-menu-link").click(function(event){sectionWithSidebarMenu.currentPageName=$(this).data("page");sectionWithSidebarMenu.transitionToFetchPage();window.history.pushState(sectionWithSidebarMenu.currentPageName,"","./"+sectionWithSidebarMenu.currentPageName);event.preventDefault()});window.onpopstate=function(event){if(window.history.state){sectionWithSidebarMenu.currentPageName=window.history.state}else{sectionWithSidebarMenu.currentPageName=sectionWithSidebarMenu.getLastSegmentOfUrl()}sectionWithSidebarMenu.fetchPage()}}sectionWithSidebarMenu.smoothBackToTop(".top-link",sectionWithSidebarMenu.SCROLL_DELAY_TIME)},transitionToFetchPage:function(){var fetchFlag=false;if($(window).scrollTop()==sectionWithSidebarMenu.$elements.offset().top){sectionWithSidebarMenu.fetchPage()}else{fetchFlag=true;$("html, body").animate({scrollTop:sectionWithSidebarMenu.$elements.offset().top},sectionWithSidebarMenu.SCROLL_DELAY_TIME,function(){if(fetchFlag){fetchFlag=false;sectionWithSidebarMenu.fetchPage()}})}},fetchPage:function(){sectionWithSidebarMenu.$elementsBody.empty().addClass("is-loading");if(sectionWithSidebarMenu.cachedPages[sectionWithSidebarMenu.currentPageName]){sectionWithSidebarMenu.displayUpdate(sectionWithSidebarMenu.cachedPages[sectionWithSidebarMenu.currentPageName])}else{$.ajax({url:"./"+sectionWithSidebarMenu.currentPageName,dataType:"html",success:function(response){sectionWithSidebarMenu.cachedPages[sectionWithSidebarMenu.currentPageName]=response;sectionWithSidebarMenu.displayUpdate(response)},error:function(){return false}})}},displayUpdate:function(content){var fetchedSectionBodyContent=$(content).find(".section-with-sidebar-menu-body").html();var $breadcrumbLink=$(".ui-breadcrumb .last a");var $breadcrumbLinkText=$breadcrumbLink.find(".breadcrumb-text");var $currentPageNavElem=sectionWithSidebarMenu.$elements.find('.sidebar-menu-list-item:has([data-page="'+sectionWithSidebarMenu.currentPageName+'"])');sectionWithSidebarMenu.$elementsBody.removeClass("is-loading").append(fetchedSectionBodyContent);sectionWithSidebarMenu.$elements.find(".sidebar-menu-list-item").removeClass("is-current");$currentPageNavElem.addClass("is-current");sectionWithSidebarMenu.currentPageDisplayName=$currentPageNavElem.find(".sidebar-menu-header").text();$breadcrumbLink.attr("href",window.location.href);if($breadcrumbLinkText.length){$breadcrumbLinkText.text(sectionWithSidebarMenu.currentPageDisplayName)}else{$breadcrumbLink.text(sectionWithSidebarMenu.currentPageDisplayName)}document.title=[sectionWithSidebarMenu.currentPageDisplayName].concat(document.title.split(" - ").slice(1)).join(" - ")},isHistorySupported:function(){var ua=navigator.userAgent;if((ua.indexOf("Android 2.")!==-1||ua.indexOf("Android 4.0")!==-1)&&ua.indexOf("Mobile Safari")!==-1&&ua.indexOf("Chrome")===-1){return false}return window.history&&"pushState"in window.history},smoothBackToTop:function(query,duration){$(query).click(function(event){$("html, body").animate({scrollTop:0},duration);event.preventDefault()})},getLastSegmentOfUrl:function(){var pathName=window.location.pathname;if(pathName.charAt(pathName.length-1)=="/"){pathName=pathName.substr(0,pathName.length-1)}return pathName.substr(pathName.lastIndexOf("/")+1)}};
//# sourceMappingURL=main.js.map